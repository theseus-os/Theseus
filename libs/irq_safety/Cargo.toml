[package]
name = "irq_safety"
version = "0.0.1"
authors = ["Zhiyao Ma"]
description = "A mutex that will disable the interrupt when locked"
categories = ["no-std", "lock"]
license = "MIT"

[dependencies]
cfg-if = "1.0.0"

[target.'cfg(target_arch = "x86_64")'.dependencies.irq_safety]
git = "https://github.com/theseus-os/irq_safety"

[target.'cfg(target_arch = "arm")'.dependencies.cortex-m]
features = ["inline-asm"]
version = "0.7.2"

[target.'cfg(target_arch = "arm")'.dependencies.spin]
version = "0.9.0"

[target.'cfg(target_arch = "arm")'.dependencies.owning_ref]
git = "https://github.com/kevinaboos/owning-ref-rs.git"

[target.'cfg(target_arch = "arm")'.dependencies.stable_deref_trait]
git = "https://github.com/kevinaboos/stable_deref_trait.git"
branch = "spin"
default-features = false
features = [ "alloc", "spin" ]


[lib]
doctest = false
test = false
path = "lib.rs"
