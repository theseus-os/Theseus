[workspace]


## Here, we specify that all subdirectories in the kernel/ and applications/ directories should be built, 
## except for those starting with a "." So, we build all kernel and application crates except hidden directories.
members = [
	"kernel/[!.]*/",
	"applications/[!.]*/",
]



exclude = [
	## exclude the build directories
	"build",
	"cfg",
	"compiler_plugins",
	"libs",
	"scripts",
	"target",
	"tools",
	"userspace",

	## dunno what this is, but it doesn't compile! @Wenqiu?
	"kernel/graph_drawer",
]


[patch.crates-io]
### use our own no_std-compatilbe getopts
getopts = { git = "https://github.com/kevinaboos/getopts" }
### use our own no_std-compatible qp trie
qp-trie = { git = "https://github.com/theseus-os/qp-trie-rs" }
### use our own no_std-compatible downcast-rs
downcast-rs = { git = "https://github.com/theseus-os/downcast-rs" }
### use the latest version of core_io that supports the latest nightly Rust compiler
core_io = { git = "https://github.com/Acciente717/rust-core_io" }


### These profiles fix the new rustc behavior of splitting one crate into many object files. 
### That messes up our module loading, which is bad!
### See this link about profiles: https://doc.rust-lang.org/cargo/reference/manifest.html
# workaround rust-lang/rust#47074
[profile.dev]
codegen-units = 1
incremental = false

# workaround rust-lang/rust#47074
[profile.release]
codegen-units = 1
incremental = false
